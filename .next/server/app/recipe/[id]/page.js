(()=>{var e={};e.id=316,e.ids=[316],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},70:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(695),s(2066),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["recipe",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,695)),"/Users/avaamo/Recipe-project/recipe-app/frontend/app/recipe/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2066)),"/Users/avaamo/Recipe-project/recipe-app/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/avaamo/Recipe-project/recipe-app/frontend/app/recipe/[id]/page.tsx"],p="/recipe/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/recipe/[id]/page",pathname:"/recipe/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9761:(e,t,s)=>{Promise.resolve().then(s.bind(s,7698))},7698:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(326),a=s(7577),i=s(5047),n=s(1076),l=s(3734),o=s(7427),c=s(1870),d=s(5302),p=s(2600);function m(){let{id:e}=(0,i.useParams)(),t=(0,i.useRouter)(),[s,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(!0),[u,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),[v,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(null),[_,S]=(0,a.useState)([]),[C,E]=(0,a.useState)(""),[P,I]=(0,a.useState)(null),[Z,T]=(0,a.useState)(""),F=async()=>{let e=localStorage.getItem("user_id");if(!e||!s?.id){console.error("Missing user_id or recipe_id");return}try{let t=await fetch(f?"https://recipe-app-backend-a8du.onrender.com/api/recipes/remove-favorite":"https://recipe-app-backend-a8du.onrender.com/api/recipes/save-favorite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(e),recipe_id:s.id})}),r=await t.json();if(!t.ok)throw Error(r.message||"Failed to update favorite");b(!f)}catch(e){console.error("Error toggling favorite:",e)}},L=async t=>{let r=localStorage.getItem("user_id");if(!r||!s?.id){console.error("User ID or recipe ID is missing");return}try{let s=`https://recipe-app-backend-a8du.onrender.com/api/recipes/${e}/rate`,a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(r),rating:t})});if(a.ok){N(t);let s=await fetch(`https://recipe-app-backend-a8du.onrender.com/api/recipes/${e}/ratings`),r=await s.json();k(Number(r.average_rating))}else{let e=await a.json();throw Error(e.message||"Failed to submit rating")}}catch(e){console.error("Error submitting rating:",e)}},R=async()=>{let t=localStorage.getItem("user_id");if(t&&C.trim())try{let s=`https://recipe-app-backend-a8du.onrender.com/api/recipes/${e}/comment`,r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(t),comment_text:C})}),a=await r.json();if(r.ok)S([a,..._]),E("");else throw Error(a.message||"Failed to post comment")}catch(e){console.error("Error posting comment:",e)}},U=async e=>{let t=localStorage.getItem("user_id");if(t)try{let s=`https://recipe-app-backend-a8du.onrender.com/api/recipes/comments/${e}`,r=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(t),comment_text:Z})}),a=await r.json();if(!r.ok)throw Error(a.message||"Failed to update comment");S(t=>t.map(t=>t.id===e?{...t,comment_text:Z}:t)),I(null),T("")}catch(e){console.error("Error updating comment:",e)}},A=async e=>{let t=localStorage.getItem("user_id");if(t)try{let s=`https://recipe-app-backend-a8du.onrender.com/api/recipes/comments/${e}`,r=await fetch(s,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(t)})}),a=await r.json();if(!r.ok)throw Error(a.message||"Failed to delete comment");S(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting comment:",e)}};return x?r.jsx(c.Z,{}):u?r.jsx("p",{className:"text-center text-red-500",children:u}):s?(0,r.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"min-h-screen bg-gradient-to-br from-purple-100 to-pink-100",children:[r.jsx(d.Z,{isLoggedIn:j,handleLogout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),y(!1),t.push("/")}}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-6 sm:px-8 lg:px-12 py-12 bg-white shadow-lg rounded-2xl relative mt-8 mb-8",children:[r.jsx("button",{onClick:()=>{t.back()},className:"bg-purple-500 text-white px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base rounded hover:bg-purple-600 absolute top-4 right-4 z-30",children:"Go Back"}),r.jsx(n.E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"text-2xl sm:text-4xl font-bold text-gray-800 mb-6 text-center",children:s.name}),(0,r.jsxs)("div",{className:"relative w-full h-80",children:[s.video_url?r.jsx(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},className:"w-full h-full",children:r.jsx("iframe",{src:s.video_url.replace("watch?v=","embed/"),title:s.name,allowFullScreen:!0,className:"w-full h-full rounded-lg shadow-md"})}):r.jsx(n.E.img,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},src:"/placeholder.svg",alt:s.name,className:"w-full h-80 object-cover rounded-lg shadow-md"}),j&&r.jsx("button",{onClick:F,className:"absolute top-3 left-3 z-20 text-red-500 hover:text-red-600 transition",children:r.jsx(o.Z,{className:`h-7 w-7 ${f?"fill-red-500":""}`})}),(0,r.jsxs)("div",{className:"absolute top-3 right-3 z-20 flex items-center bg-black bg-opacity-70 px-2 py-1 rounded-full",children:[r.jsx(l.Z,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-sm font-semibold text-white ml-1",children:w??0})]})]}),r.jsx(n.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"text-gray-700 text-lg mt-6 text-center",children:s.description}),(0,r.jsxs)("div",{className:"mt-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Ingredients"}),r.jsx(n.E.div,{className:"flex flex-wrap gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},children:s.ingredients.map((e,t)=>r.jsx(n.E.span,{className:"bg-purple-200 text-purple-800 px-4 py-2 rounded-lg text-lg font-semibold shadow-sm",whileHover:{scale:1.1},children:e},t))})]}),(0,r.jsxs)("div",{className:"mt-10",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Instructions"}),r.jsx("div",{className:"space-y-4",children:s.instructions.map((e,t)=>(0,r.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*t,duration:.5},className:"bg-gray-50 p-5 rounded-lg shadow-md flex items-start space-x-4",children:[r.jsx("div",{className:"bg-green-500 text-white rounded-full h-10 w-10 flex items-center justify-center text-lg font-semibold",children:t+1}),r.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:e})]},t))})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center mt-10",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Rate this Recipe"}),r.jsx("div",{className:"flex",children:[1,2,3,4,5].map(e=>r.jsx("button",{onClick:()=>j?L(e):console.warn("User must be logged in to rate"),className:"focus:outline-none",disabled:!j,children:r.jsx(l.Z,{className:`w-8 h-8 cursor-pointer transition duration-300 ${e<=(v||w||0)?"text-yellow-400":"text-gray-300"}`})},e))}),!j&&r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Log in to rate this recipe."})]}),(0,r.jsxs)("div",{className:"mt-10",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4 text-center",children:"Comments"}),j&&(0,r.jsxs)("div",{className:"mb-4 flex flex-col items-center",children:[r.jsx("textarea",{className:"w-full p-3 border rounded-md",placeholder:"Write a comment...",value:C,onChange:e=>E(e.target.value)}),r.jsx("button",{onClick:R,className:"px-4 py-2 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition mt-2",children:"Post Comment"})]}),r.jsx("div",{className:"space-y-4",children:_.map(e=>(0,r.jsxs)("div",{className:"bg-gray-100 p-3 rounded-md",children:[r.jsx("p",{className:"text-sm font-semibold",children:e.username}),P===e.id?(0,r.jsxs)("div",{children:[r.jsx("textarea",{className:"w-full p-2 border rounded-md",value:Z,onChange:e=>T(e.target.value)}),(0,r.jsxs)("div",{className:"mt-2 space-x-2 flex justify-center",children:[r.jsx("button",{onClick:()=>U(e.id),className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition",children:"Save"}),r.jsx("button",{onClick:()=>{I(null),T("")},className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition",children:"Cancel"})]})]}):(0,r.jsxs)("div",{children:[r.jsx("p",{children:e.comment_text}),j&&localStorage.getItem("user_id")===String(e.user_id)&&(0,r.jsxs)("div",{className:"mt-2 space-x-2 flex justify-center",children:[r.jsx("button",{onClick:()=>{I(e.id),T(e.comment_text)},className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition",children:"Edit"}),r.jsx("button",{onClick:()=>A(e.id),className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition",children:"Delete"})]})]})]},e.id))})]})]}),r.jsx(p.Z,{})]}):r.jsx("p",{className:"text-center text-gray-500",children:"Recipe not found."})}},2600:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(326),a=s(1130);let i=()=>{let{openModal:e}=(0,a.d)();return r.jsx("footer",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white py-8",children:(0,r.jsxs)("div",{className:"container mx-auto text-center px-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-6 mb-4",children:[r.jsx("button",{onClick:()=>e("privacy"),className:"cursor-pointer text-gray-200 hover:text-white transition text-xs sm:text-base",children:"Privacy Policy"}),r.jsx("button",{onClick:()=>e("terms"),className:"cursor-pointer text-gray-200 hover:text-white transition text-xs sm:text-base",children:"Terms of Service"}),r.jsx("a",{href:"/contact",className:"text-gray-200 hover:text-white transition text-xs sm:text-base",children:"Contact Us"})]}),(0,r.jsxs)("p",{className:"text-gray-300 text-xs sm:text-sm",children:["\xa9 ",new Date().getFullYear()," DessertAI. All rights reserved."]})]})})}},5302:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(326),a=s(7577),i=s(434),n=s(5047),l=s(4019),o=s(748);let c=({isLoggedIn:e,handleLogout:t})=>{let[s,c]=(0,a.useState)(!1);return(0,n.useRouter)(),(0,r.jsxs)("header",{className:"bg-white bg-opacity-80 backdrop-blur-md shadow-lg relative z-20",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[r.jsx(i.default,{href:"/",children:r.jsx("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 cursor-pointer",children:"DessertAI"})}),r.jsx("div",{className:"hidden md:flex items-center space-x-8",children:e?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.default,{href:"/recent-searches",className:"text-gray-700 hover:text-purple-600 font-semibold transition",children:"Recent Searches"}),r.jsx(i.default,{href:"/favorites",className:"text-gray-700 hover:text-pink-600 font-semibold transition",children:"Your Favorites"}),r.jsx("button",{onClick:t,className:"px-4 py-2 bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.default,{href:"/login",children:r.jsx("button",{className:"px-4 py-2 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition",children:"Log In"})}),r.jsx(i.default,{href:"/signup",children:r.jsx("button",{className:"px-4 py-2 bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition",children:"Sign Up"})})]})}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>{c(e=>!e)},className:"text-gray-700 focus:outline-none",children:s?r.jsx(l.Z,{className:"w-6 h-6"}):r.jsx(o.Z,{className:"w-6 h-6"})})})]}),s&&r.jsx("div",{className:"md:hidden bg-white bg-opacity-90 backdrop-blur-md shadow-lg",children:r.jsx("div",{className:"px-4 py-4 space-y-4",children:e?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.default,{href:"/recent-searches",onClick:()=>c(!1),className:"block text-gray-700 hover:text-purple-600 font-semibold transition",children:"Recent Searches"}),r.jsx(i.default,{href:"/favorites",onClick:()=>c(!1),className:"block text-gray-700 hover:text-pink-600 font-semibold transition",children:"Your Favorites"}),r.jsx("button",{onClick:()=>{c(!1),t()},className:"block w-full text-left px-4 py-2 bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.default,{href:"/login",onClick:()=>c(!1),className:"block text-gray-700 hover:text-purple-600 font-semibold transition",children:"Log In"}),r.jsx(i.default,{href:"/signup",onClick:()=>c(!1),className:"block text-gray-700 hover:text-pink-600 font-semibold transition",children:"Sign Up"})]})})})]})}},1870:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(326);let a=()=>r.jsx("div",{className:"flex justify-center items-center min-h-screen",children:(0,r.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{transform:"rotate(0 50 50)",children:[r.jsx("path",{fill:"#ffcc66",stroke:"#cc9900",strokeWidth:"2",d:"M30 70 Q50 90 70 70 L75 90 Q50 95 25 90 Z"}),r.jsx("path",{fill:"#ff99cc",stroke:"#cc6699",strokeWidth:"2",d:"M35 55 Q50 35 65 55 Q75 40 50 30 Q25 40 35 55 Z"}),r.jsx("circle",{cx:"50",cy:"28",r:"5",fill:"#ff3333"})]}),r.jsx("animateTransform",{attributeType:"XML",attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"1s",repeatCount:"indefinite"})]})})},7427:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},695:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/avaamo/Recipe-project/recipe-app/frontend/app/recipe/[id]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[819,496,927,63],()=>s(70));module.exports=r})();