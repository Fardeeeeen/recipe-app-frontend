(()=>{var e={};e.id=316,e.ids=[316],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},70:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c}),a(695),a(1506),a(5866);var s=a(3191),r=a(8716),i=a(7922),n=a.n(i),o=a(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c=["",{children:["recipe",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,695)),"/Users/avaamo/Recipe-project/recipe-app/frontend/app/recipe/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/Users/avaamo/Recipe-project/recipe-app/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/avaamo/Recipe-project/recipe-app/frontend/app/recipe/[id]/page.tsx"],p="/recipe/[id]/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/recipe/[id]/page",pathname:"/recipe/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9761:(e,t,a)=>{Promise.resolve().then(a.bind(a,7698))},7698:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(326),r=a(7577),i=a(5047),n=a(1076),o=a(3734),l=a(7427),c=a(1870),d=a(5302),p=a(9906);function m(){let{id:e}=(0,i.useParams)(),t=(0,i.useRouter)(),[a,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!0),[h,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),[v,w]=(0,r.useState)(null),[N,k]=(0,r.useState)(null),[_,S]=(0,r.useState)([]),[E,C]=(0,r.useState)(""),[P,I]=(0,r.useState)(null),[Z,T]=(0,r.useState)(""),M=async()=>{let e=localStorage.getItem("user_id");if(!e||!a?.id){console.error("Missing user_id or recipe_id");return}try{let t=await fetch(f?"https://recipe-app-backend-a8du.onrender.com/api/recipes/remove-favorite":"https://recipe-app-backend-a8du.onrender.com/api/recipes/save-favorite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(e),recipe_id:a.id})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to update favorite");y(!f)}catch(e){console.error("Error toggling favorite:",e)}},O=async t=>{let s=localStorage.getItem("user_id");if(!s||!a?.id){console.error("User ID or recipe ID is missing");return}try{let a=`https://recipe-app-backend-a8du.onrender.com/api/recipes/${e}/rate`,r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(s),rating:t})});if(r.ok){w(t);let a=await fetch(`https://recipe-app-backend-a8du.onrender.com/api/recipes/${e}/ratings`),s=await a.json();k(Number(s.average_rating))}else{let e=await r.json();throw Error(e.message||"Failed to submit rating")}}catch(e){console.error("Error submitting rating:",e)}},R=async()=>{let t=localStorage.getItem("user_id");if(t&&E.trim())try{let a=`https://recipe-app-backend-a8du.onrender.com/api/recipes/${e}/comment`,s=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(t),comment_text:E})}),r=await s.json();if(s.ok)S([r,..._]),C("");else throw Error(r.message||"Failed to post comment")}catch(e){console.error("Error posting comment:",e)}},L=async e=>{let t=localStorage.getItem("user_id");if(t)try{let a=`https://recipe-app-backend-a8du.onrender.com/api/recipes/comments/${e}`,s=await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(t),comment_text:Z})}),r=await s.json();if(!s.ok)throw Error(r.message||"Failed to update comment");S(t=>t.map(t=>t.id===e?{...t,comment_text:Z}:t)),I(null),T("")}catch(e){console.error("Error updating comment:",e)}},q=async e=>{let t=localStorage.getItem("user_id");if(t)try{let a=`https://recipe-app-backend-a8du.onrender.com/api/recipes/comments/${e}`,s=await fetch(a,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:parseInt(t)})}),r=await s.json();if(!s.ok)throw Error(r.message||"Failed to delete comment");S(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting comment:",e)}};return x?s.jsx(c.Z,{}):h?s.jsx("p",{className:"text-center text-red-500",children:h}):a?(0,s.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"min-h-screen bg-gradient-to-br from-purple-100 to-pink-100",children:[s.jsx(d.Z,{isLoggedIn:b,handleLogout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),j(!1),t.push("/")}}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-6 sm:px-8 lg:px-12 py-12 bg-white shadow-lg rounded-2xl relative mt-8 mb-8",children:[s.jsx("button",{onClick:()=>{t.back()},className:"bg-purple-500 text-white px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base rounded hover:bg-purple-600 absolute top-4 right-4 z-30",children:"Go Back"}),s.jsx(n.E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"text-2xl sm:text-4xl font-bold text-gray-800 mb-6 text-center",children:a.name}),(0,s.jsxs)("div",{className:"relative w-full h-80",children:[a.video_url?s.jsx(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},className:"w-full h-full",children:s.jsx("iframe",{src:a.video_url.replace("watch?v=","embed/"),title:a.name,allowFullScreen:!0,className:"w-full h-full rounded-lg shadow-md"})}):s.jsx(n.E.img,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},src:"/placeholder.svg",alt:a.name,className:"w-full h-80 object-cover rounded-lg shadow-md"}),b&&s.jsx("button",{onClick:M,className:"absolute top-3 left-3 z-20 text-red-500 hover:text-red-600 transition",children:s.jsx(l.Z,{className:`h-7 w-7 ${f?"fill-red-500":""}`})}),(0,s.jsxs)("div",{className:"absolute top-3 right-3 z-20 flex items-center bg-black bg-opacity-70 px-2 py-1 rounded-full",children:[s.jsx(o.Z,{className:"w-5 h-5 text-yellow-400"}),s.jsx("span",{className:"text-sm font-semibold text-white ml-1",children:N??0})]})]}),s.jsx(n.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"text-gray-700 text-lg mt-6 text-center",children:a.description}),(0,s.jsxs)("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Ingredients"}),s.jsx(n.E.div,{className:"flex flex-wrap gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},children:a.ingredients.map((e,t)=>s.jsx(n.E.span,{className:"bg-purple-200 text-purple-800 px-4 py-2 rounded-lg text-lg font-semibold shadow-sm",whileHover:{scale:1.1},children:e},t))})]}),(0,s.jsxs)("div",{className:"mt-10",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Instructions"}),s.jsx("div",{className:"space-y-4",children:a.instructions.map((e,t)=>(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*t,duration:.5},className:"bg-gray-50 p-5 rounded-lg shadow-md flex items-start space-x-4",children:[s.jsx("div",{className:"bg-green-500 text-white rounded-full h-10 w-10 flex items-center justify-center text-lg font-semibold",children:t+1}),s.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:e})]},t))})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center mt-10",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Rate this Recipe"}),s.jsx("div",{className:"flex",children:[1,2,3,4,5].map(e=>s.jsx("button",{onClick:()=>b?O(e):console.warn("User must be logged in to rate"),className:"focus:outline-none",disabled:!b,children:s.jsx(o.Z,{className:`w-8 h-8 cursor-pointer transition duration-300 ${e<=(v||N||0)?"text-yellow-400":"text-gray-300"}`})},e))}),!b&&s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Log in to rate this recipe."})]}),(0,s.jsxs)("div",{className:"mt-10",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4 text-center",children:"Comments"}),b&&(0,s.jsxs)("div",{className:"mb-4 flex flex-col items-center",children:[s.jsx("textarea",{className:"w-full p-3 border rounded-md",placeholder:"Write a comment...",value:E,onChange:e=>C(e.target.value)}),s.jsx("button",{onClick:R,className:"px-4 py-2 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition mt-2",children:"Post Comment"})]}),s.jsx("div",{className:"space-y-4",children:_.map(e=>(0,s.jsxs)("div",{className:"bg-gray-100 p-3 rounded-md",children:[s.jsx("p",{className:"text-sm font-semibold",children:e.username}),P===e.id?(0,s.jsxs)("div",{children:[s.jsx("textarea",{className:"w-full p-2 border rounded-md",value:Z,onChange:e=>T(e.target.value)}),(0,s.jsxs)("div",{className:"mt-2 space-x-2 flex justify-center",children:[s.jsx("button",{onClick:()=>L(e.id),className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition",children:"Save"}),s.jsx("button",{onClick:()=>{I(null),T("")},className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition",children:"Cancel"})]})]}):(0,s.jsxs)("div",{children:[s.jsx("p",{children:e.comment_text}),b&&localStorage.getItem("user_id")===String(e.user_id)&&(0,s.jsxs)("div",{className:"mt-2 space-x-2 flex justify-center",children:[s.jsx("button",{onClick:()=>{I(e.id),T(e.comment_text)},className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition",children:"Edit"}),s.jsx("button",{onClick:()=>q(e.id),className:"px-2 py-1 text-xs sm:px-4 sm:py-2 sm:text-base bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition",children:"Delete"})]})]})]},e.id))})]})]}),s.jsx(p.Z,{})]}):s.jsx("p",{className:"text-center text-gray-500",children:"Recipe not found."})}},1870:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(326);let r=()=>s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:(0,s.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{transform:"rotate(0 50 50)",children:[s.jsx("path",{fill:"#ffcc66",stroke:"#cc9900",strokeWidth:"2",d:"M30 70 Q50 90 70 70 L75 90 Q50 95 25 90 Z"}),s.jsx("path",{fill:"#ff99cc",stroke:"#cc6699",strokeWidth:"2",d:"M35 55 Q50 35 65 55 Q75 40 50 30 Q25 40 35 55 Z"}),s.jsx("circle",{cx:"50",cy:"28",r:"5",fill:"#ff3333"})]}),s.jsx("animateTransform",{attributeType:"XML",attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"1s",repeatCount:"indefinite"})]})})},7427:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3734:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},695:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/avaamo/Recipe-project/recipe-app/frontend/app/recipe/[id]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[819,496,927,535],()=>a(70));module.exports=s})();